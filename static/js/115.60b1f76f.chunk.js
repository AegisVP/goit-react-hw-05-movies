"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[115],{1718:function(t,e,n){n.d(e,{$D:function(){return k},DF:function(){return Z},J0:function(){return y},RV:function(){return g}});var r=n(8214),a=n(885),c=n(5861),u=n(4569),o=n.n(u),i=n(2791),s="https://api.themoviedb.org/3",l="movie/popular",f="search/movie",p="movie",d="credits",h="reviews",v=new URLSearchParams({api_key:"ad24807293275bef83ede161311e71e0"});function g(t,e){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)((0,r.Z)().mark((function t(e,n){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,o().get("".concat(s,"/").concat(p,"/").concat(e,"?").concat(v)).then((function(t){return t.data})).catch(window.alert);case 4:a=t.sent,n(a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t,e){return m.apply(this,arguments)}function m(){return(m=(0,c.Z)((0,r.Z)().mark((function t(e,n){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,o().get("".concat(s,"/").concat(p,"/").concat(e,"/").concat(d,"?").concat(v)).then((function(t){return t.data.cast.slice(0,10)})).catch(window.alert);case 4:a=t.sent,n(a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t,e){return x.apply(this,arguments)}function x(){return(x=(0,c.Z)((0,r.Z)().mark((function t(e,n){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,o().get("".concat(s,"/").concat(p,"/").concat(e,"/").concat(h,"?").concat(v)).then((function(t){return t.data.results.slice(0,10)})).catch(window.alert);case 4:a=t.sent,n(a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k=function(){var t=(0,i.useState)(""),e=(0,a.Z)(t,2),n=e[0],u=e[1],p=(0,i.useState)(""),d=(0,a.Z)(p,2),h=d[0],g=d[1],w=(0,i.useState)({results:[]}),y=(0,a.Z)(w,2),m=y[0],Z=y[1];function x(){return(x=(0,c.Z)((0,r.Z)().mark((function t(e){var n,a,c,u,i,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,a=void 0===n?"trending":n,c=e.page,u=void 0===c?1:c,(null===a||void 0===a?void 0:a.length)>0&&"trending"!==a&&(v.set("query",a),v.set("page",u)),i="trending"===a?l:f,p="".concat(s,"/").concat(i,"?").concat(v),t.next=6,o().get(p).then((function(t){return t.data})).then(Z).catch(window.alert);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(0,i.useEffect)((function(){n?function(t){x.apply(this,arguments)}({query:n,page:h}):k()}),[n,h]);var k=function(){Z({})};return[m,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.query,r=void 0===e?"trending":e,a=t.page,c=void 0===a?1:a;n!==r&&(u(null===r||void 0===r?void 0:r.trim().toLocaleLowerCase()),g(c),(null===r||void 0===r?void 0:r.length)>=0||k())},k]}},5115:function(t,e,n){n.r(e);var r=n(885),a=n(1718),c=n(2791),u=n(501),o=n(184),i=(0,c.lazy)((function(){return n.e(280).then(n.bind(n,6280))})),s=(0,c.lazy)((function(){return n.e(146).then(n.bind(n,4146))}));e.default=function(){var t=(0,u.lr)(),e=(0,r.Z)(t,2),n=e[0],l=e[1],f=(0,c.useState)(""),p=(0,r.Z)(f,2),d=p[0],h=p[1],v=(0,c.useState)(""),g=(0,r.Z)(v,2),w=g[0],y=g[1],m=(0,a.$D)(),Z=(0,r.Z)(m,2),x=Z[0],k=Z[1],b=n.get("query"),q=n.get("page");(0,c.useEffect)((function(){var t,e=null!==b&&void 0!==b?b:"",n=(t=q,isNaN(parseInt(t))||!t||""===t||t<=0?1:q);""!==e&&l({query:e,page:n}),h(e),y(n)}),[b,q]),(0,c.useEffect)((function(){k({query:d,page:w})}),[d,w]);return x.total_results?(document.title="React HW05 - Movie search - ".concat(d),(0,o.jsx)(c.Suspense,{fallback:(0,o.jsx)("p",{children:"Loading..."}),children:(0,o.jsx)(s,{filmList:x,state:{from:"/movies?query=".concat(d),addPath:""}})})):(document.title="React HW05 - Movie search",(0,o.jsxs)(c.Suspense,{fallback:(0,o.jsx)("p",{children:"Loading..."}),children:[(0,o.jsx)(i,{onSubmitHandler:function(t){null===t||void 0===t||t.preventDefault(),""!==t.currentTarget.query.value&&l({query:t.currentTarget.query.value,page:1})}}),0===(null===x||void 0===x?void 0:x.total_results)&&(0,o.jsx)("p",{children:"Nothing found"})]}))}}}]);
//# sourceMappingURL=115.60b1f76f.chunk.js.map